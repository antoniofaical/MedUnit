<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | MedUnit</title>

    <link rel="stylesheet" href="styles/global.css" />
    <link rel="stylesheet" href="styles/dashboard.css" />
</head>

<body>
    <!-- HEADER -->
    <header class="dashboard-header">
        <div class="logo-container">
            <img src="assets/logo_medunit.svg" alt="Logo MedUnit" />
        </div>
        <div class="farmacia-nome">
            <p class="subtitle">Painel da farmácia</p>
            <p id="nome-farmacia">...</p>
        </div>
        <button id="logout-btn" class="btn-outline">Sair</button>
    </header>

    <!-- CONTEÚDO -->
    <main class="container">
        <div class="linha-cabecalho">
            <h2>Módulos registrados</h2>
            <div class="acoes-modulo">
                <button id="btn-conectar" class="btn-outline">
                    Conectar módulo
                    <img src="assets/bluetooth.svg" class="icone-bluetooth" alt="bluetooth icon">
                </button>
            </div>
        </div>

        <table id="tabela-modulos">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Medicamento</th>
                    <th>Dosagem</th>
                    <th>Estoque</th>
                    <th>Paciente</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <!-- Preenchido dinamicamente via JS -->
            </tbody>
        </table>
    </main>

    <script src="/eel.js" defer></script>
    <script src="scripts/dashboard.js" defer></script>

    <!-- MODAL: Sincronizando -->
    <div id="modal-sincronizando" class="modal-overlay">
        <div class="modal-card">

            <div class="modal-top">
                <img src="assets/logo_medunit.svg" alt="Logo MedUnit" class="logo" />
            </div>

            <div class="modal-middle">
                <img src="assets/cubo_sync.svg" alt="Conectando..." class="modal-cubo" />
                <h3>Sincronizando com o módulo <span id="sync-id">...</span>...</h3>
                <p class="subtitle">Aguarde...</p>
            </div>

            <div class="modal-bottom">
                <div class="botoes-sync">
                    <button id="btn-cancelar-sync" class="btn-outline">Cancelar</button>
                    <button id="btn-tentar-sync" class="btn-secondary">Tentar Novamente</button>
                </div>
            </div>

        </div>
    </div>

    <!-- MODAL: Falha na Conexão -->
    <div id="modal-falhou" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-top">
                <img src="assets/logo_medunit.svg" alt="Logo MedUnit" class="logo" />
            </div>
            <div class="modal-middle">
                <img src="assets/cubo_fail.svg" alt="Conexão falhou" class="modal-cubo" />
                <h3>Conexão falhou.</h3>
            </div>
            <div class="modal-bottom">
                <div class="botoes-sync">
                    <button class="btn-outline" id="btn-cancelar-falha">Cancelar</button>
                    <button class="btn-secondary" id="btn-tentar-falha">Tentar Novamente</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: Conexão Estabelecida -->
    <div id="modal-conectado" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-top">
                <img src="assets/logo_medunit.svg" alt="Logo MedUnit" class="logo" />
            </div>
            <div class="modal-middle">
                <img src="assets/cubo_ok.svg" alt="Conectado" class="modal-cubo" />
                <h3>Conexão estabelecida.</h3>
            </div>
            <div class="modal-bottom">
                <div class="botoes-sync">
                    <button class="btn-secondary" id="btn-proximo-editar">Próximo</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: Editar Módulo -->
    <div id="modal-editar" class="modal-overlay">
        <div class="modal-card grande">
            <h2>Editar Módulo</h2>
            <p class="subtitle">MOD-<span id="modulo-id-edit">---</span></p>

            <form id="form-editar-modulo">
                <div class="grupo-campos">
                    <div>
                        <label for="paciente">Nome do Paciente</label>
                        <input type="text" id="paciente" name="paciente" required />
                    </div>
                    <div>
                        <label for="cpf">CPF do Paciente</label>
                        <input type="text" id="cpf" name="cpf" required />
                    </div>
                </div>

                <div class="grupo-campos">
                    <div>
                        <label for="medicamento">Medicamento</label>
                        <input type="text" id="medicamento" name="medicamento" required />
                    </div>
                    <div>
                        <label for="dosagem">Dosagem</label>
                        <input type="text" id="dosagem" name="dosagem" required />
                    </div>
                </div>

                <div class="grupo-campos">
                    <div>
                        <label for="formato">Formato</label>
                        <input type="text" id="formato" name="formato" required />
                    </div>
                    <div>
                        <label for="quantidade_por_dose">Qtd por Dose</label>
                        <input type="number" id="quantidade_por_dose" name="quantidade_por_dose" min="1" required />
                    </div>
                    <div>
                        <label for="estoque_atual">Estoque Atual</label>
                        <input type="number" id="estoque_atual" name="estoque_atual" min="0" required />
                    </div>
                </div>

                <label for="horarios">Horários (HH:MM separados por vírgula)</label>
                <input type="text" id="horarios" name="horarios" placeholder="08:00, 20:00" required />

                <div class="botoes-sync">
                    <button type="button" class="btn-outline" id="btn-limpar-modulo">Limpar Módulo</button>
                    <button type="button" class="btn-outline" id="btn-cancelar-edicao">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </div>


    <!-- MODAL: Confirmar Limpeza -->
    <div id="modal-limpar" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-top">
                <img src="assets/logo_medunit.svg" alt="Logo MedUnit" class="logo" />
            </div>
            <div class="modal-middle">
                <img src="assets/cubo_wipe.svg" alt="Apagar módulo" class="modal-cubo" />
                <h3>Deseja apagar todos os dados do módulo <span id="modulo-id-limpar">---</span>?</h3>
            </div>
            <div class="modal-bottom">
                <div class="botoes-sync">
                    <button class="btn-outline" id="btn-cancelar-limpeza">Cancelar</button>
                    <button class="btn-danger" id="btn-confirmar-limpeza">Apagar</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>